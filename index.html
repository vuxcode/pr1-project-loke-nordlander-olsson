<!-- Various buttons with different functions -->
<button onclick="locations()">Locations</button>

<button onclick="move()">Move</button>

<button onclick="attack()">Attack</button>

<button onclick="characterInfo()">Character</button>

<button onclick="merchant()" id="merchant">Merchant</button>

<script>
	//Asks for your name in a prompt
	var adventurer = prompt("What is your name adventurer?");

	//Explains your fate
	alert("Your name is " + adventurer + ", a cultist from the town of Arklewood.\nYou come from a long line of cultists with a mysterious past.\nYour goal is to break away from tradition and pursue a new path in life.");

	//Hint for where you can find potions
	alert("There is only one known merchant in the area and she resides in a small cornerstore in Loftwer.\nBe careful though, she may not offer what you seek.");

	//Array with places you can visit
	var places = ["Arklewood", "Loftwer", "Forest of Peril"];

	var firstVisit = true;

	//Where you currently are, used so only one place can visit a merchant
	var currentLocation = "Loftwer";

	//First location of the adventure
	alert("You are currently in " + places[1] + ".");

	//Extra information about where you can find earlier info
	alert("Check the console for previously attained information of your current playthrough.");
	
	//Shows where you can go
	function locations() {
		alert("The following locations are available:\n" + places[0] + "\n" + places[1] + "\n" + places[2]);
	}

	//Character base level
	var level = 1;

	//Character base experience
	var xp = 0;

	//Character health
	var health = 100 * level;

	//The global character health, used in healing to have a threshold
	var globalHealth = health;

	//The enemies you'll encounter in the game
	var enemy = ["Goblin", "Troll", "Bandit", "Sorcerer", "Skeleton", "Drunk"];

	//Health of enemy, 80% of the player's health
	var enemyHealth = health * 0.8;

	//Base damage, used in the attackDamage function
	var damage = 0;

	//The base amount of health potions that the user starts with
	var healthPotion = 3;

	//Base amount of starting trypkels, this game's currency
	var money = 10;

	//A placeholde used when you want nothing to happend in one part of the code
	var placeholder = false;

	//Array of information that is featured in the console log
	var consoleInfo = ["Player levelled up: ", "Current location: ", "Enemy defeated: ", "Enemy health: ", "Player health: ", "Player lost.", "Encountered: "]

	//Displays info about your character
	function characterInfo() {
		alert("Name: " + adventurer + "\nClass: Cultist" + "\nLevel: " + level + "\nExperience: " + xp + "\nMoney: " + money + "\nHealth: " + health);
	}

	//A function that tells you when you've levelled up and the level you reached
	function levelUp() {
		//If xp is equal to or higher than 100, your level increases and congratulates you
		//It then resets the xp
		if (xp >= 100) {
			level++;
			alert("Congrats, you are now level " + level + ".");
			xp = 0;
			console.log(consoleInfo[0] + level);			
		}
		//Stops the function
		else {
			console.log("Player did not level up from this battle.")
			return;
		}
	}

	//Move your character to a different location
	function move() {
		var travel = prompt("Where do you want to go?");
		if (travel.toLowerCase() == "arklewood") {
			alert("You are now in " + places[0] + ".");
			console.log(consoleInfo[1] + places[0]);
			currentLocation = "Arklewood";
		}
		else if (travel.toLowerCase() == "loftwer") {
			alert("You are now in " + places[1] + ".");
			console.log(consoleInfo[1] + places[1]);
			currentLocation = "Loftwer";
		}
		else if (travel.toLowerCase() == "forest of peril") {
			alert("You are now in " + places[2] + ".");
			console.log(consoleInfo[1] + places[2]);
			currentLocation = "Forest of Peril";
		}
		else {
			alert("There is no place with that name.");
		}
		//Gets the element id of the button with the id of 'merchant'
		//Then it either disables or enables it depending on where you are
		var merchantPresent = document.getElementById('merchant');
		if (currentLocation == "Loftwer") {
			merchantPresent.disabled = false;
		}
		else {
			merchantPresent.disabled = true;
		}
	}

	//Picks a number between minimum and maximum to randomize damage
	function attackDamage(min, max) {
		min = Math.ceil(min);
		max = Math.floor(max);
		damage = Math.floor(Math.random() * (max - min + 1) + min);
	}

	//Function for the battle system
	function attack() {
		//Sorts the enemy and then randomizes them
		enemy.sort(() => Math.random() - 0.5);
		alert("You encounter a " + enemy[0] + ".");
		console.log(consoleInfo[6] + enemy[0]);
		//While enemy's health or your health is above 0, the fight continues
		while (enemyHealth > 0 && health > 0) {
			//Asks what move you wanna use
			var action = prompt("Do you want to 'attack', 'defend' or 'heal'?\nWrite which move you wanna use or click cancel if you want to leave the fight.");
			//Depending on what you write in, different moves are done
			//Writing in attack makes the attackDamage function randomize a number
			//It then multiplies it by the level your character is at and removes the damage from their health
			//Then it does the same thing for the enemy
			if (action.toLowerCase() == "attack") {
				attackDamage(15, 30);
				damage = damage * level;
				enemyHealth = enemyHealth - damage;
				alert("The " + enemy[0] + " took " + damage + " damage and now has " + enemyHealth + " healthpoints.");
				console.log("Enemy took " + damage + " points of damage.");
				console.log(consoleInfo[3] + enemyHealth);
				attackDamage(10, 25);
				damage = damage * level;
				health = health - damage;
			}
			//Triggers the enemy attack damage that gets multiplied by level
			//Then it divides it by 1.3 and rounds it to the closest integer
			//Then it subtracts the damage from the health
			else if (action.toLowerCase() == "defend") {
				attackDamage(10, 25);
				damage = damage * level;
				damage = damage / 1.3;
				damage = Math.round(damage);
				health = health - damage;
				alert("You blocked the attack and negated some of the damage.");
			}
			//Choosing heal will give you more healthpoints
			else if (action.toLowerCase() == "heal") {
				//Tells you how many healt potions you have left
				alert("You have " + healthPotion + " health potions left.")
				//Asks which health potion you want to use
				var heal = prompt("Do you wanna use a large or small health potion?");
				//If you have 1 or more health potions, you can heal
				//It will otherwise alert you that there are none to use
				if (healthPotion > 0) {
					if (heal.toLowerCase() == "large" || "large health potion") {
						//Variable that defines how much you heal in percentage
						//Depends on max health/global health
						var larHealthPotion = globalHealth * 0.3;
						//Adds that number to the health
						health += larHealthPotion;
						//Removes one potion so you can't heal forever
						healthPotion -= 1;
						//If the health exceeds the max health, reverts it to the max hp
						if (health > globalHealth) {
							health = globalHealth;
						}
						//Placeholder, nothing happens
						else {
							placeholder;
						}
					}
					//Same as the previous if statement
					else if (action.toLowerCase() == "small" || "small health potion") {
						var smaHealthPotion = globalHealth * 0.15;
						health += smaHealthPotion;
						healthPotion -= 1;
						if (health > globalHealth) {
							health = globalHealth;
						}
						else {
							placeholder;
						}
					}
					//If you write in anything else then it tells you this
					else {
						alert("Please pick a large or small health potion. Nothing else.");
					}
				}
				else {
					alert("You don't have any health potions.")
				}
			}

			//Alerts you if you write in an invalid command
			//Returns to the beginning of the attack function and starts over
			else {
				alert("You accidentally trip and the enemy doesn't even bother to fight you.");
				return attack();
			}
			//Tells you how much damage you took and how much health you have now
			alert("You took " + damage + " damage and your health is now " + health + ".");
			console.log("Player took " + damage + " points of damage.");
			console.log(consoleInfo[4] + health);
		}
		//If the enemy has equal to or less than 0 in their health
		//Then it alerts that you've won and gain 50 xp
		//It also triggers the levelUp function that checks if your xp is 100
		if (enemyHealth <= 0) {
			xp += 50;
			alert("You win against the " + enemy[0] + " and gain 50 experience.");
			console.log(consoleInfo[2] + enemy[0]);
			console.log("Player gained 50 experience.");
			levelUp();
		}
		//Tells you that you lost against the enemy
		else {
			alert("You lost against the " + enemy[0] + " and gain nothing.")
			console.log(consoleInfo[5] + enemy[0]);
		}
		//Resets your health to 100 and multiplies it by level
		//Same for the enemy except it multiplies from your health by 0.8
		health = 100 * level;
		enemyHealth = health * 0.8;
	}

	//This will be where the trading part of the game will take place
	//Not everything is implemented, just the basic information
	//You get a unique message the first time you click the button
	function merchant() {
		if (firstVisit == true) {
			alert("You decide to investigate a store with a big sign just saying 'Wares'.\nIt is located in the corner of a street with filthy walls and roads.")
			alert("Inside there is a frail old woman with grayish long hair and pale white skin.\nShe says 'YOU! What is your business here?' with a raspy voice.");
			alert("Your voice is quiet like the moon and not a single sound comes out. \nShe beckons you over with her bony finger.")
			alert("'A quiet one, eh?'\n'No worries, we serve your kind too.'\n'An old woman has to make trypkels through some way in order to live in luxury like this.'")
			alert("'Tell me your name and I'll let you trade for my wares.'\nYou tell her your name.")
			alert("'" + adventurer + "? What kind of parent names their kid that?'\n'You obviously need some help with a name like that'")
			firstVisit = false;
		}
		else {
			alert("'I see you have come back'");
		}
		alert("'Please have a look at my wares, " + adventurer + ".' says the old woman.");
		alert("On the shelves there are a few red health potions without labels.\nThe fact that their descriptions are missing fills you with unease.");
		alert("There are also various other wares that only serve as decorations and therefore do not interest you in the least.");
		var merchantQuery = prompt("'Are you interested in buying some potions?'\n'Only 8 trypkels a bottle.'");
		if (merchantQuery.toLowerCase() == "yes") {
			var potionAmount = prompt("'How many would you like?'");
			Number(potionAmount);
			if (potionAmount > 0) {
				var totalBought = potionAmount * 8;
				if (totalBought < money) {
					alert("'That will be " + totalBought + " trypkels for " + potionAmount + " bottles of health potions.'");
					money -= totalBought;
					healthPotion += potionAmount;
				}
				else if (totalBought > money) {
					alert("'Sorry but it seems like you don't have enough trypkels to buy that amount'\n'Come back when you have the right amount.'");
				}
				else {
					alert("'I don't deal in words, you know. I am no poet.'");
				}
			}
		}
		else {
			alert("'If you can't decide right now then please get out of my store.'");
		} 
	}

//May test out adding 'number' * level inside of the attackDamage functions
//Just to test out adding more difficulty

//Idea, add a button for talking to a random NPC
//Gives certain hints about what you can do

//Remember to add money reward after battles

//Might add a max capacity for potions
</script>